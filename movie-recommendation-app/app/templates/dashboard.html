{% extends "base.html" %}

{% block content %}
<head>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{{ url_for('static', filename='remove_like.js') }}"></script>
</head>

<h1>Welcome, {{ username }}!</h1>

<h2>Your Liked Movies</h2>

{% if liked_movies %}
    <ul>
        {% for movie in liked_movies %}
            <li style="display: flex; align-items: center; margin-bottom: 20px;">
                <!-- Movie Poster -->
                <img src="https://image.tmdb.org/t/p/w500{{ movie.poster_path }}" alt="Movie Poster" style="width: 100px; margin-right: 20px;">

                <!-- Movie Title and Info -->
                <div>
                    <h3>{{ movie.title }}</h3>
                    <p>Release Date: {{ movie.release_date }}</p>
                    <p>{{ movie.overview[:150] }}...</p> <!-- Optional: Display part of the overview -->
                </div>

                <!-- Button to go to movie detail page -->
                <a href="{{ url_for('movie', movie_id=movie.id) }}" class="btn btn-info" style="margin-left: auto;">View Details</a>

                <!-- AJAX Button to Remove from Likes -->
                <button class="btn btn-danger remove-like-button" data-movie-id="{{ movie.id }}" style="margin-left: 10px;">Remove from Likes</button>
            </li>
            <hr>
        {% endfor %}
    </ul>
{% else %}
    <p>You haven't liked any movies yet.</p>
{% endif %}

{% endblock %}
